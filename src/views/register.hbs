<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register</title>
  <style>
    .message { color: red; }
    .success { color: green; }
    .hidden { display: none; }
  </style>
  <script>
    function clearMessage() {
      document.getElementById('message').textContent = '';
      document.getElementById('success').textContent = '';
      document.getElementById('existing-account').classList.remove('hidden');
    }
  </script>
</head>
<body>
  <h1>Registrarse</h1>
  {{#if error}}
    <p id="message" class="message">{{error}}</p>
  {{/if}}
  {{#if success}}
    <p id="success" class="success">{{success}} <a id="login-link" href="/login">inicie sesión</a></p>
  {{/if}}
  <form action="/register" method="post" oninput="clearMessage()">
    <div>
      <label for="first_name">Nombre:</label>
      <input type="text" id="first_name" name="first_name" required>
    </div>
    <div>
      <label for="last_name">Apellido:</label>
      <input type="text" id="last_name" name="last_name" required>
    </div>
    <div>
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>
    </div>
    <div>
      <label for="age">Edad:</label>
      <input type="number" id="age" name="age" required>
    </div>
    <div>
      <label for="password">Contraseña:</label>
      <input type="password" id="password" name="password" required>
    </div>
    <div>
      <label for="role">Rol:</label>
      <select id="role" name="role">
        <option value="user">Usuario</option>
        <option value="admin">Admin</option>
      </select>
    </div>
    <button type="submit">Registrarme</button>
  </form>
  <p id="existing-account" class="{{#if success}}hidden{{/if}}">¿Ya tienes una cuenta? <a href="/login">Inicia sesión aquí</a></p>
</body>
</html>